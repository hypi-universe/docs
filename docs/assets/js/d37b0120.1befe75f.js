"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[616],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return h}});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),s=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(a),h=o,u=m["".concat(c,".").concat(h)]||m[h]||k[h]||r;return a?n.createElement(u,l(l({ref:t},p),{},{components:a})):n.createElement(u,l({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},68391:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var n=a(87462),o=a(63366),r=(a(67294),a(3905)),l=["components"],i={id:"openwhisk-slack",title:"Using the Slack Package",sidebar_label:"Slack Package",slug:"/lowcode/openwhisk-slack"},c=void 0,s={unversionedId:"lowcode/openwhisk-slack",id:"lowcode/openwhisk-slack",title:"Using the Slack Package",description:"The /whisk.system/slack package offers a convenient way to use the Slack APIs.",source:"@site/content/lowcode/openwhisk-slack.md",sourceDirName:"lowcode",slug:"/lowcode/openwhisk-slack",permalink:"/docs/lowcode/openwhisk-slack",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/lowcode/openwhisk-slack.md",tags:[],version:"current",frontMatter:{id:"openwhisk-slack",title:"Using the Slack Package",sidebar_label:"Slack Package",slug:"/lowcode/openwhisk-slack"},sidebar:"docs",previous:{title:"Alarm Package",permalink:"/docs/lowcode/openwhisk-alarms"},next:{title:"WebSocket Package",permalink:"/docs/lowcode/openwhisk-websocket"}},p=[{value:"Posting a message to a Slack channel",id:"posting-a-message-to-a-slack-channel",children:[],level:3},{value:"Using the Slack token-based API",id:"using-the-slack-token-based-api",children:[],level:3}],k={toc:p};function m(e){var t=e.components,a=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"/whisk.system/slack")," package offers a convenient way to use the ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/"},"Slack APIs"),"."),(0,r.kt)("p",null,"The package includes the following actions:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Entity"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Parameters"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/whisk.system/slack")),(0,r.kt)("td",{parentName:"tr",align:null},"package"),(0,r.kt)("td",{parentName:"tr",align:null},"url, channel, username"),(0,r.kt)("td",{parentName:"tr",align:null},"Interact with the Slack API")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/whisk.system/slack/post")),(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},"text, url, channel, username"),(0,r.kt)("td",{parentName:"tr",align:null},"Posts a message to a Slack channel")))),(0,r.kt)("p",null,"Creating a package binding with the ",(0,r.kt)("inlineCode",{parentName:"p"},"username"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"url"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"channel")," values is suggested. With binding, you don't need to specify the values each time that you invoke the action in the package."),(0,r.kt)("h3",{id:"posting-a-message-to-a-slack-channel"},"Posting a message to a Slack channel"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"/whisk.system/slack/post")," action posts a message to a specified Slack channel. The parameters are as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url"),": The Slack webhook URL."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"channel"),": (optional) The Slack channel to post the message to."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"username"),": The name to post the message as."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"text"),": A message to post."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"token"),": (optional) A Slack ",(0,r.kt)("a",{parentName:"li",href:"https://api.slack.com/legacy/oauth"},"access token"),". ")),(0,r.kt)("p",null,"The following is an example of configuring Slack, creating a package binding, and posting a message to a channel."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Configure a Slack ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/incoming-webhooks"},"incoming webhook")," for your team."),(0,r.kt)("p",{parentName:"li"},"After Slack is configured, you get a webhook URL that looks like ",(0,r.kt)("inlineCode",{parentName:"p"},"https://hooks.slack.com/services/aaaaaaaaa/bbbbbbbbb/cccccccccccccccccccccccc"),". You'll need this in the next step.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a package binding with your Slack credentials, the channel that you want to post to, and the user name to post as."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'hypi wsk package bind /whisk.system/slack mySlack \\\n  --param url "https://hooks.slack.com/services/..." \\\n  --param username "Bob" \\\n  --param channel "#MySlackChannel"\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Invoke the ",(0,r.kt)("inlineCode",{parentName:"p"},"post")," action in your package binding to post a message to your Slack channel."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'hypi wsk action invoke mySlack/post --blocking --result \\\n  --param text "Hello from OpenWhisk!"\n')))),(0,r.kt)("h3",{id:"using-the-slack-token-based-api"},"Using the Slack token-based API"),(0,r.kt)("p",null,"If you prefer, you may optionally choose to use Slack's token-based API, rather than the webhook API. If you so choose, then pass in a ",(0,r.kt)("inlineCode",{parentName:"p"},"token")," parameter that contains your Slack ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/tokens"},"access token"),". You may then use any of the ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/methods"},"Slack API methods")," as your ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," parameter. For example, to post a message, you would use a ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," parameter value of ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/methods/chat.postMessage"},"slack.postMessage"),"."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Large portions of this page is copied from the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/openwhisk/tree/master/docs"},"Apache OpenWhisk documentation")," on August 5th 2021 - where there have been customisations to match Hypi's deployment this has been noted. Apache OpenWhisk and the Apache name are the property of the Apache Foundation and licensed under the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/openwhisk/blob/master/LICENSE.txt"},"Apache V2 license")," ."))))}m.isMDXComponent=!0}}]);