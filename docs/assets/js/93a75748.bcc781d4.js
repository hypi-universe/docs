"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2334],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||i;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1332:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},8515:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(7462),r=n(7294),i=n(2389),o=n(5394),l=n(6010),s="tabItem_tAz6";function u(e){var t,n,i,u=e.lazy,p=e.block,c=e.defaultValue,m=e.values,d=e.groupId,h=e.className,k=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=m?m:k.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),f=(0,o.lx)(g,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var N=null===c?c:null!=(t=null!=c?c:null==(n=k.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=k[0])?void 0:i.props.value;if(null!==N&&!g.some((function(e){return e.value===N})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+N+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=(0,o.UB)(),v=y.tabGroupChoices,b=y.setTabGroupChoices,w=(0,r.useState)(N),A=w[0],P=w[1],j=[],T=(0,o.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var C=v[d];null!=C&&C!==A&&g.some((function(e){return e.value===C}))&&P(C)}var S=function(e){var t=e.currentTarget,n=j.indexOf(t),a=g[n].value;a!==A&&(T(t),P(a),null!=d&&b(d,a))},O=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=j.indexOf(e.currentTarget)+1;n=j[a]||j[0];break;case"ArrowLeft":var r=j.indexOf(e.currentTarget)-1;n=j[r]||j[j.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":p},h)},g.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:A===t?0:-1,"aria-selected":A===t,key:t,ref:function(e){return j.push(e)},onKeyDown:O,onFocus:S,onClick:S},i,{className:(0,l.Z)("tabs__item",s,null==i?void 0:i.className,{"tabs__item--active":A===t})}),null!=n?n:t)}))),u?(0,r.cloneElement)(k.filter((function(e){return e.props.value===A}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==A})}))))}function p(e){var t=(0,i.Z)();return r.createElement(u,(0,a.Z)({key:String(t)},e))}},7194:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return m},default:function(){return h}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(8515),l=n(1332),s=["components"],u={id:"authorisation",title:"Authorisation",sidebar_label:"Authorisation",slug:"/lowcode/authorisation"},p=void 0,c={unversionedId:"lowcode/authorisation",id:"lowcode/authorisation",title:"Authorisation",description:"Old Authorisation system is deprecated and please use the new one.",source:"@site/content/lowcode/authorisation.md",sourceDirName:"lowcode",slug:"/lowcode/authorisation",permalink:"/docs/lowcode/authorisation",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/lowcode/authorisation.md",tags:[],version:"current",frontMatter:{id:"authorisation",title:"Authorisation",sidebar_label:"Authorisation",slug:"/lowcode/authorisation"},sidebar:"docs",previous:{title:"References",permalink:"/docs/lowcode/references"},next:{title:"Realtime database",permalink:"/docs/lowcode/realtime-db"}},m=[{value:"Subject",id:"subject",children:[],level:4},{value:"Object",id:"object",children:[],level:4},{value:"Policy",id:"policy",children:[],level:2},{value:"Permission",id:"permission",children:[{value:"Update, Delete, Trash, Link and Unlink of a resource",id:"update-delete-trash-link-and-unlink-of-a-resource",children:[],level:3},{value:"Searching for resources",id:"searching-for-resources",children:[],level:3},{value:"Implicit Permission",id:"implicit-permission",children:[],level:3}],level:2},{value:"Permission APIs",id:"permission-apis",children:[{value:"Permission",id:"permission-1",children:[],level:3},{value:"hasPermission",id:"haspermission",children:[],level:3},{value:"me",id:"me",children:[],level:3}],level:2}],d={toc:m};function h(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Old Authorisation system is deprecated and please use the new one."))),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Authorization"},"Authorisation"),"\xa0is the process of specifying access/ rights/ privileges to various resources. It provides information security and computer security to systems. Of course, we can control the access to users as well. The authorisation process decides whether access should be given or denied."),(0,i.kt)("p",null,"Authorisation defers from ",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/authentication"},"Authentication"),". Authentication verifies the identity of a user. In authorisation, a user or an application gets permission to access a resource. The resource determines the extent of the permissions it should grant."),(0,i.kt)("p",null,"Classic authorisation models consist of a triple; a ",(0,i.kt)("a",{parentName:"p",href:"#subject"},"subject"),", an ",(0,i.kt)("a",{parentName:"p",href:"#object"},"object"),", and an ",(0,i.kt)("inlineCode",{parentName:"p"},"action"),". Hypi adopts this triple with few enhancements."),(0,i.kt)("p",null,"Hypi's authorisation model is similar to ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/User-Managed_Access"},"User\xa0Managed Access Control"),"\xa0/UMA. But it is not a compliant implementation of the same."),(0,i.kt)("p",null,"Check out the concepts involved in the authorisation."),(0,i.kt)("h4",{id:"subject"},"Subject"),(0,i.kt)("p",null,"A subject is an entity trying to perform an action like query or mutation or gain access to a resource."),(0,i.kt)("h4",{id:"object"},"Object"),(0,i.kt)("p",null,"An object or a resource is the thing being protected. In Hypi, two primary things can be protected."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Resource\xa0- any object that exists on the Hypi platform"),(0,i.kt)("li",{parentName:"ul"},"Scope\xa0- Any GraphQL field of any type OR any arbitrary Uniform Resource Identifier")),(0,i.kt)("h2",{id:"policy"},"Policy"),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"policy")," is an interface with two fields that contain important pieces of information. It has the ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," of the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"subject")," to provide authorisation. And it holds the Enum ",(0,i.kt)("inlineCode",{parentName:"p"},"logic")," of granting or denying access. The values of the logic can be ",(0,i.kt)("inlineCode",{parentName:"p"},"Positive")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Negative"),". The interface ",(0,i.kt)("inlineCode",{parentName:"p"},"Policy")," comes in built in ",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/core"},"Core")," System App."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"interface\xa0Policy\xa0{\n    name:\xa0String!\n    logic:\xa0AuthLogic\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field Name")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field type")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Description")))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the policy")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"logic")),(0,i.kt)("td",{parentName:"tr",align:null},"AuthLogic"),(0,i.kt)("td",{parentName:"tr",align:null},"Positive / Negative")))),(0,i.kt)("p",null,"There are several parameters to decide the policy of authorisation. One of the main purposes of a policy is to promote re-use. Policies are intended to be created and re-used so that they can be kept as simple as possible."),(0,i.kt)("p",null,"Hypi has various policy types for different kinds of subjects. Various groups, accounts, roles, realms, clients have individual policy objects. A time-bound access policy is also in place. You can also group various policies with Aggregate policy.  These policies are derived from main Policy Iterface."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"GroupPolicy\xa0- Applies to a list of Accounts or Organisations in the groups.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type GroupPolicy implements Policy {\n    name:String!\n    logic:AuthLogic\n    groups(...):[Group!]\n}\n")),(0,i.kt)("p",null,"The group may have list of accounts, list of organizations or other list of groups."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type Group\xa0{\n    name:\xa0String!\n    accounts(...):\xa0[Account!]\n    children(...):\xa0[Group!]\n    organisations(...):\xa0[Organisation!]\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field Name")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field type")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Description")))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the Group")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"accounts")),(0,i.kt)("td",{parentName:"tr",align:null},"Account"),(0,i.kt)("td",{parentName:"tr",align:null},"List of Accounts to be grouped")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"children")),(0,i.kt)("td",{parentName:"tr",align:null},"Group"),(0,i.kt)("td",{parentName:"tr",align:null},"Other Children Groups")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"organisations")),(0,i.kt)("td",{parentName:"tr",align:null},"Organisation"),(0,i.kt)("td",{parentName:"tr",align:null},"List of Organizations to be grouped")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"RolePolicy\xa0- A user with an account may play various kinds of role like Manager/Owner etc. RolePolicy  applies to a list of Roles.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type RolePolicy implements Policy {\n    name:String!\n    logic:AuthLogic\n    roles(...):[Role!]!\n}\n")),(0,i.kt)("p",null,"A Role data type has list of accounts."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field Name")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field type")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Description")))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the Role")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"accounts")),(0,i.kt)("td",{parentName:"tr",align:null},"Account"),(0,i.kt)("td",{parentName:"tr",align:null},"List of accounts")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"AccountPolicy\xa0- Applies to a set of User Accounts.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type AccountPolicy implements Policy {\n    name:String!\n    logic:AuthLogic\n    accounts(...):[Account!]\n}\n")),(0,i.kt)("p",null,"Please know more about Account data type ",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/authentication"},"here"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"TimePolicy\xa0\u2013 Allows time-bound access to groups, roles, accounts, realms, and clients. ",(0,i.kt)("inlineCode",{parentName:"li"},"from")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"to")," dates are mentioned to specify the the duration.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type TimePolicy implements Policy {\n    from:DateTime\n    to:DateTime\n    name:String!\n    logic:AuthLogic\n    clients(...):[AuthClient!]\n    roles(...):[Role!]\n    groups(...):[Group!]\n    accounts(...):[Account!]\n    realms(...):[RealmLink!]\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"ClientPolicy\xa0- Controls access based on the client used to access a resource. A client acts on behalf of a subject.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type ClientPolicy implements Policy {\n    name:String!\n    logic:AuthLogic\n    clients(...):[AuthClient!]\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AuthClient")," stores the information of Client."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field Name")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Field type")),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"th"},"Description")))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the Client")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"secret")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Verification String")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"AggregatePolicy\xa0- Allows grouping one or more policies. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type Aggregated Policy implementsPolicy {\n    decisionStrategy:DecisionStrategy\n    name:String!\n    logic:AuthLogic\n    policies(...):[Policy!]!\n}\n")),(0,i.kt)("p",null,"The decision strategy ",(0,i.kt)("inlineCode",{parentName:"p"},"DecisionStrategy")," dictates how the policies associated with a given permission are evaluated and how a final decision is obtained.  "),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Affirmative")," means that at least one policy must evaluate to a positive decision in order for the final decision to be also positive. "),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Unanimous")," means that all policies must evaluate to a positive decision in order for the final decision to be also positive. "),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Consensus")," means that the number of positive decisions must be greater than the number of negative decisions. If the number of positive and negative is the same, the final decision will be negative."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"enum DecisionStrategy{\n    Unanimous\n    Affirmative\n    Consensus\n}\n")),(0,i.kt)("h2",{id:"permission"},"Permission"),(0,i.kt)("p",null,"Permission encapsulates the object involved in the authorisation. You may check out the parameters in the ",(0,i.kt)("a",{parentName:"p",href:"#permission-apis"},"Permission APIs")," section."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type Permission\xa0{\n    hypi:\xa0Hypi\n    name:\xa0String!\n    decisionStrategy:\xa0DecisionStrategy\n    type:\xa0String!\n    resource:\xa0String\n    operationType:\xa0OpType!\n    includeAllAccounts:\xa0Boolean\n    policies(**...**):\xa0[Policy!]\n    scopes(**...**):\xa0[String!]!\n    operations(**...**):\xa0[String]!\n}\n")),(0,i.kt)("p",null,"Permissions are based upon various operations the subject wants to perform on the object."),(0,i.kt)("h3",{id:"update-delete-trash-link-and-unlink-of-a-resource"},"Update, Delete, Trash, Link and Unlink of a resource"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/crud"},"Mutation")," permissions may be granted to the subject. It includes update, delete, trash, link, and unlink permissions. All of these functions operate on existing resources. Permission object generates an authorisation request for mutations."),(0,i.kt)("h3",{id:"searching-for-resources"},"Searching for resources"),(0,i.kt)("p",null,"The platform uses\xa0",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/arcql"},"ArcQL"),"\xa0query language for finding data. All requests to get data, no matter how trivial the query, goes through ArcQL. During a search, resources that match that search are further filtered down to only those that the subject is allowed to see. So, only certain types of records a subject can access through a query. For example, a password is a resource that is not accessible to any subject except the user."),(0,i.kt)("h3",{id:"implicit-permission"},"Implicit Permission"),(0,i.kt)("p",null,"If no\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"Permission"),"\xa0is given explicitly, the platform acts as if one is implicitly created with an\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"AccountPolicy"),". This permission grants access to the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"Account"),"\xa0which created the object. So, the creator of an object has complete access to it by default - no one else does."),(0,i.kt)("h2",{id:"permission-apis"},"Permission APIs"),(0,i.kt)("p",null,"Let's look at the APIs related to Permission."),(0,i.kt)("h3",{id:"permission-1"},"Permission"),(0,i.kt)("p",null,"The below example demonstrates how to create permission to an account to access an object's details."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'mutation {\n  upsert(\n    values: {\n      Permission: [\n        {\n          name: "Grant access to anonymous user"\n          decisionStrategy: Unanimous\n          type: "File"\n          resource: "<file-id>"\n          scopes: ["*"]\n          operationType: Query\n          operations: ["find"]\n          #includeAllAccounts: true, \n          policies: [\n            {\n              hypi: { impl: "AccountPolicy" }\n              name: "Grant user anonymous access to my file"\n              logic: Positive\n              accounts: [{ hypi: { id: "anonymous" } }]\n            }\n          ]\n        }\n      ]\n    }\n  ) {\n    id\n  }\n}\n\n')),(0,i.kt)("p",null,"Let's check the parameters."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"The description of the permission")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"decisionStrategy")),(0,i.kt)("td",{parentName:"tr",align:null},"DecisionStrategy"),(0,i.kt)("td",{parentName:"tr",align:null},"Defines how the policy arrives at a decision, defaults to Unanimous")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"type")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"The type or an object that this permission applies to")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"resource")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"If present, then the given policies gets applied to this resource. Provide Hypi ID of the resource.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"operationType")),(0,i.kt)("td",{parentName:"tr",align:null},"OpType"),(0,i.kt)("td",{parentName:"tr",align:null},"Query, Mutation, or Subscription")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"includeAllAccounts")),(0,i.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,i.kt)("td",{parentName:"tr",align:null},"If true, this permission grants/denies access to all accounts (including anonymous account)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"policies")),(0,i.kt)("td",{parentName:"tr",align:null},"Policy"),(0,i.kt)("td",{parentName:"tr",align:null},"Give access to specific users, groups, etc instead of to all accounts")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"scopes")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"An array of the fields to grant access to. Not permitted to access other fields. Use `*\u2019 to give access to all fields.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"operations")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"a list of fields in the operationType e.g. find, upsert, or any custom method")))),(0,i.kt)("h3",{id:"haspermission"},"hasPermission"),(0,i.kt)("p",null,"You may check if the user has permission to access an object's details. You can use the function ",(0,i.kt)("inlineCode",{parentName:"p"},"hasPermission")," for that. The below example demonstrates how to use the function. Refer to the table above to know about the parameters. Make sure you have passed the appropriate session token as the \u201cAuthorisation\u201d parameter in the HTTP header. You get a session token after ",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/authentication#login"},"login")," into the account"),(0,i.kt)(o.Z,{defaultValue:"query",values:[{label:"GraphQL Query",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"query",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'{ \n   hasPermission(req:{\n     opType:Mutation,\n     operationName:"upsert",\n     type:"Account",\n     resource:"01F0R0BJ9XGDHS2GGM7YY4Y7M1"\n     scopes:"username"\n })\n}\n'))),(0,i.kt)(l.Z,{value:"response",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "data": {\n     "hasPermission": [true]\n  }\n}\n')))),(0,i.kt)("p",null,"The function returns ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," if the user has requested permission. Otherwise, it returns ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("h3",{id:"me"},"me"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"me")," function returns the details of various permissions for a user. You may access the information of permissions provided to various groups, accounts, roles, realms, and clients. This function returns an object of type PermissionDescription"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"type PermissionDescription\xa0{\n    hypi:\xa0Hypi\n    roles:\xa0[Role!]\n    groups:\xa0[Group!]\n    organisations:\xa0[Organisation!]\n    realms:\xa0[Realm!]\n    permissions(...):\xa0[Permission]\n}\n")),(0,i.kt)("p",null,"You may simply use the fields of PermissionDescription to access permission details. Information about the group/organization/role should have been stored while ",(0,i.kt)("a",{parentName:"p",href:"/docs/lowcode/authentication#createaccount"},"creating the user account"),". Otherwise, the fields would return a null value."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"{\n   me {\n        roles {\n            name\n        }\n        organisations {\n            name\n            phones {\n                number\n            }\n        }\n        permissions {\n            operations\n            operationType\n        }\n    }\n}\n\n")))}h.isMDXComponent=!0}}]);