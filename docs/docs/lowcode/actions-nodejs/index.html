<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hypi Platform Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hypi Platform Documentation Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120274358-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-120274358-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Hypi Platform Documentation" href="/opensearch.xml"><title data-react-helmet="true">JavaScript actions | Hypi Platform Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.hypi.app/docs/lowcode/actions-nodejs"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="JavaScript actions | Hypi Platform Documentation"><meta data-react-helmet="true" name="description" content="OpenWhisk requires a JSON object as output. Hence, serverless function cannot return arrays. It must return an object at the top level which can have arrays inside it."><meta data-react-helmet="true" property="og:description" content="OpenWhisk requires a JSON object as output. Hence, serverless function cannot return arrays. It must return an object at the top level which can have arrays inside it."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.hypi.app/docs/lowcode/actions-nodejs"><link data-react-helmet="true" rel="alternate" href="https://docs.hypi.app/docs/lowcode/actions-nodejs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.hypi.app/docs/lowcode/actions-nodejs" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://OR6SSGNSLB-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.795db178.css">
<link rel="preload" href="/assets/js/runtime~main.05f086b7.js" as="script">
<link rel="preload" href="/assets/js/main.b40aeaa3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_wv3w">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_MSPW themedImage--light_wHoI"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_MSPW themedImage--dark_hQyA"></div><b class="navbar__title">Hypi</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Main website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Register or Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_nrys toggle_MgWk toggleDisabled_BlY8"><div class="toggleTrack_CRsS" role="button" tabindex="-1"><div class="toggleTrackCheck_HKEn"><span class="toggleIcon_rGl7">ðŸŒœ</span></div><div class="toggleTrackX_KNPL"><span class="toggleIcon_rGl7">ðŸŒž</span></div><div class="toggleTrackThumb_MGVi"></div></div><input type="checkbox" class="toggleScreenReader_PgvV" aria-label="Switch between dark and light mode"></div><div class="searchBox_kyqE"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_uMdt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_DgRZ" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_D8w4"><div class="sidebar_neyF"><nav class="menu thin-scrollbar menu_WJjW"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" href="/docs/">Welcome</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" href="/docs/hypi-tink-mood">Mood Board</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" href="/docs/hypi-tink-stories">Stories Board</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" href="/docs/stories-data-tables">Data Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" href="/docs/hypi-tink-designer">App Designer</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/hypi-tink-glossary">Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_XeC1" aria-current="page" href="/docs/lowcode/">Lowcode</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/overview">Hypi Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/get-started">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/faq">Hypi FAQs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/api-references">API &amp; References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/serverless">Serverless</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_XeC1" aria-current="page" tabindex="0" href="/docs/lowcode/actions-nodejs">Serverless: Language Support</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/lowcode/actions-nodejs">JavaScript actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-python">Python actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-java">Java actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-swift">Swift actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-go">Go actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-php">PHP actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-ruby">Ruby actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-rust">Rust actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-dotnet">.NET actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/actions-docker">Docker actions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/nodejs-client-library">Serverless: Client Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/hypi-cli-intro">Hypi CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/graphql">GraphQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/core">System Apps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/react-todo-app">Example Apps</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/hypi-angular">Hypi + Angular</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/tutorials">Tutorial</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_XeC1" tabindex="0" href="/docs/lowcode/ui-create-app">User Interface Guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lowcode/glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/lowcode/get-involved">Get Involved!</a></li></ul></nav></div></aside><main class="docMainContainer_WBVt"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VRn9"><div class="docItemContainer_NEVZ"><article><div class="tocCollapsible_UA1s theme-doc-toc-mobile tocMobile_n2Hs"><button type="button" class="clean-btn tocCollapsibleButton_gHvH">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>JavaScript actions</h1></header><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>OpenWhisk requires a JSON object as output. Hence, serverless function cannot return arrays. It must return an object at the top level which can have arrays inside it.</p></div></div><p>The process of creating JavaScript actions is similar to that of <a href="/docs/lowcode/openwhisk-actions#the-basics">other actions</a>.</p><p>The following sections guide you through creating and invoking a single JavaScript action,
and demonstrate how to bundle multiple JavaScript files and third party dependencies.</p><ol><li>Create a JavaScript file with the following content. For this example, the file name is <code>hello.js</code>.</li></ol><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">msg</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Hello world&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>The JavaScript file might contain additional functions.
However, by convention, a function called <code>main</code> must exist to provide the entry point for the action.</p><ol start="2"><li>Create an action from the following JavaScript function. For this example, the action is called <code>hello</code>.</li></ol><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create hello hello.js</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ok: created action hello</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>The CLI automatically infers the type of the action by using the source file extension.
For <code>.js</code> source files, the action runs by using a Node.js runtime. You may specify
the Node.js runtime to use by explicitly specifying the parameter <code>--kind nodejs:14</code>, <code>--kind nodejs:12</code>, or <code>--kind nodejs:10</code>.</p><h3 class="anchor anchorWithStickyNavbar_YmL6" id="creating-asynchronous-actions">Creating asynchronous actions<a class="hash-link" href="#creating-asynchronous-actions" title="Direct link to heading">â€‹</a></h3><p>JavaScript functions that run asynchronously may need to return the activation result after the <code>main</code> function has returned. You can accomplish this by returning a Promise in your action.</p><ol><li>Save the following content in a file called <code>asyncAction.js</code>.</li></ol><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">done</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Notice that the <code>main</code> function returns a Promise, which indicates that the activation hasn&#x27;t completed yet, but is expected to in the future.</p><p>The <code>setTimeout()</code> JavaScript function in this case waits for two seconds before calling the callback function.  This represents the asynchronous code and goes inside the Promise&#x27;s callback function.</p><p>The Promise&#x27;s callback takes two arguments, resolve and reject, which are both functions.  The call to <code>resolve()</code> fulfills the Promise and indicates that the activation has completed normally.</p><p>A call to <code>reject()</code> can be used to reject the Promise and signal that the activation has completed abnormally.</p><ol start="2"><li>Run the following commands to create the action and invoke it:</li></ol><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create asyncAction asyncAction.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke --result asyncAction</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na language-json theme-code-block"><div class="codeBlockContent_wujv json"><pre tabindex="0" class="prism-code language-json codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;done&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Notice that you performed a blocking invocation of an asynchronous action.</p><ol start="3"><li>Fetch the activation log to see how long the activation took to complete:</li></ol><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk activation list --limit 1 asyncAction</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Datetime            Activation ID                    Kind      Start Duration   Status  Entity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2019-03-16 19:46:43 64581426b44e4b3d981426b44e3b3d19 nodejs:6  cold  2.033s     success guest/asyncAction:0.0.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk activation get 64581426b44e4b3d981426b44e3b3d19</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na language-json theme-code-block"><div class="codeBlockContent_wujv json"><pre tabindex="0" class="prism-code language-json codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;start&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1552762003015</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;end&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">1552762005048</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Comparing the <code>start</code> and <code>end</code> time stamps in the activation record, you can see that this activation took slightly over two seconds to complete.</p><h3 class="anchor anchorWithStickyNavbar_YmL6" id="using-actions-to-call-an-external-api">Using actions to call an external API<a class="hash-link" href="#using-actions-to-call-an-external-api" title="Direct link to heading">â€‹</a></h3><p>The examples so far have been self-contained JavaScript functions. You can also create an action that calls an external API.</p><p>This example invokes a Yahoo Weather service to get the current conditions at a specific location.</p><ol><li>Save the following content in a file called <code>weather.js</code>.</li></ol><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;request&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">location</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">location</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Vermont&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://query.yahooapis.com/v1/public/yql?q=select item.condition from weather.forecast where woeid in (select woeid from geo.places(1) where text=&quot;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">location</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&quot;)&amp;format=json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> response</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token function" style="color:rgb(130, 170, 255)">reject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token keyword control-flow" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> condition </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> text </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> temperature </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;It is &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> temperature </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27; degrees in &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">location</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27; and &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">msg</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> output</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Note that the action in the example uses the JavaScript <code>request</code> library to make an HTTP request to the Yahoo Weather API, and extracts fields from the JSON result.</p><p>This example also shows the need for asynchronous actions. The action returns a Promise to indicate that the result of this action is not available yet when the function returns. Instead, the result is available in the <code>request</code> callback after the HTTP call completes, and is passed as an argument to the <code>resolve()</code> function.</p><ol start="2"><li>Create an action from the <code>weather.js</code> file:</li></ol><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create weather weather.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ol start="3"><li>Use the following command to run the action, and observe the output:</li></ol><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke --result weather --param location &quot;Brooklyn, NY&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Using the <code>--result</code> flag means that the value returned from the action is shown as output on the command-line:</p><div class="codeBlockContainer_B_Na language-json theme-code-block"><div class="codeBlockContent_wujv json"><pre tabindex="0" class="prism-code language-json codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;msg&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;It is 28 degrees in Brooklyn, NY and Cloudy&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>This example also passed a parameter to the action by using the <code>--param</code> flag and a value that can be changed each time the action is invoked. Find out more about parameters in the <a href="/docs/lowcode/openwhisk-parameters">Working with parameters</a> section.</p><h3 class="anchor anchorWithStickyNavbar_YmL6" id="packaging-actions-as-nodejs-modules-with-npm-libraries">Packaging actions as Node.js modules with NPM libraries<a class="hash-link" href="#packaging-actions-as-nodejs-modules-with-npm-libraries" title="Direct link to heading">â€‹</a></h3><p>Instead of writing all your action code in a single JavaScript source file, actions can be deployed from a zip file containing a <a href="https://nodejs.org/docs/latest-v10.x/api/modules.html#modules_modules" target="_blank" rel="noopener noreferrer">Node.js module</a>.</p><p>Archive zip files are extracted into the runtime environment and dynamically imported using <code>require()</code> during initialisation. <strong>Actions packaged as a zip file MUST contain a valid <code>package.json</code> with a <code>main</code> field used to denote the <a href="https://nodejs.org/docs/latest-v10.x/api/modules.html#modules_folders_as_modules" target="_blank" rel="noopener noreferrer">module index file</a> to return.</strong></p><p>Including a <code>node_modules</code> folder in the zip file means external NPM libraries can be used on the platform.</p><h4 class="anchor anchorWithStickyNavbar_YmL6" id="simple-example">Simple Example<a class="hash-link" href="#simple-example" title="Direct link to heading">â€‹</a></h4><ul><li>Create the following <code>package.json</code> file:</li></ul><div class="codeBlockContainer_B_Na language-json theme-code-block"><div class="codeBlockContent_wujv json"><pre tabindex="0" class="prism-code language-json codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-action&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;dependencies&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;left-pad&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1.1.3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create the following <code>index.js</code> file:</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">myAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> leftPad </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;left-pad&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> lines </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lines</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">padded</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> lines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">l</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">leftPad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>Functions are exported from a module by setting properties on the <code>exports</code> object. The <code>--main</code> property on the action can be used to configure the module function invoked by the platform (this defaults to <code>main</code>).</p><ul><li>Install module dependencies using NPM.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create a <code>.zip</code> archive containing all files (including all dependencies).</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">zip -r action.zip *</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><blockquote><p>Please note: Using the Windows Explorer action for creating the zip file will result in an incorrect structure. OpenWhisk zip actions must have <code>package.json</code> at the root of the zip, while Windows Explorer will put it inside a nested folder. The safest option is to use the command line <code>zip</code> command as shown above.</p></blockquote><ul><li>Create the action from the zip file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create packageAction --kind nodejs:10 action.zip</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>When creating an action from a <code>.zip</code> archive with the CLI tool, you must explicitly provide a value for the <code>--kind</code> flag by using <code>nodejs:12</code>, or <code>nodejs:10</code>.</p><ul><li>Invoke the action as normal.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke --result packageAction --param lines &quot;[\&quot;and now\&quot;, \&quot;for something completely\&quot;, \&quot;different\&quot; ]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><div class="codeBlockContainer_B_Na language-json theme-code-block"><div class="codeBlockContent_wujv json"><pre tabindex="0" class="prism-code language-json codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;padded&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.......................and now&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;......for something completely&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.....................different&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_YmL6" id="handling-npm-libraries-with-native-dependencies">Handling NPM Libraries with Native Dependencies<a class="hash-link" href="#handling-npm-libraries-with-native-dependencies" title="Direct link to heading">â€‹</a></h4><p>Node.js libraries can import native dependencies needed by the modules. These native dependencies are compiled upon installation to ensure they work in the local runtime. Native dependencies for NPM libraries must be compiled for the correct platform architecture to work in Apache OpenWhisk.</p><p>There are two approaches to using libraries with native dependencies...</p><ol><li>Run <code>npm install</code> inside a Docker container from the platform images.</li><li>Building custom runtime image with libraries pre-installed.</li></ol><p><strong>The first approach is easiest but can only be used when a zip file containing all source files and libraries is less than the action size limit (48MB).</strong></p><h4 class="anchor anchorWithStickyNavbar_YmL6" id="running-npm-install-inside-runtime-container">Running <code>npm install</code> inside runtime container<a class="hash-link" href="#running-npm-install-inside-runtime-container" title="Direct link to heading">â€‹</a></h4><ul><li>Run the following command to bind the local directory into the runtime container and run <code>npm install</code>.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -it -v $PWD:/nodejsAction openwhisk/action-nodejs-v10 &quot;npm install&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>This will leave a <code>node_modules</code> folder with native dependencies compiled for correct runtime.</p><ul><li>Zip up the action source files including <code>node_modules</code> directory.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">zip -r action.zip *</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create new action with action archive.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create my-action --kind nodejs:10 action.zip</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_YmL6" id="building-custom-runtime-image">Building custom runtime image<a class="hash-link" href="#building-custom-runtime-image" title="Direct link to heading">â€‹</a></h4><ul><li>Create a <code>Dockerfile</code> with the <code>npm install</code> command run during build.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FROM openwhisk/action-nodejs-v10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUN npm install &lt;LIB_WITH_NATIVE_DEPS&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Build and push the image to Docker Hub.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker build -t &lt;USERNAME&gt;/custom-runtime .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker push &lt;USERNAME&gt;/custom-runtime</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create new action using custom runtime image.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create my-action --docker &lt;USERNAME&gt;/custom-runtime action.zip</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p><strong>Make sure the <code>node_modules</code> included in the <code>action.zip</code> does not include the same libraries folders.</strong></p><h4 class="anchor anchorWithStickyNavbar_YmL6" id="using-javascript-bundlers-to-package-action-source-files">Using JavaScript Bundlers to package action source files<a class="hash-link" href="#using-javascript-bundlers-to-package-action-source-files" title="Direct link to heading">â€‹</a></h4><p>Using a JavaScript module bundler can transform application source files (with external dependencies) into a single compressed JavaScript file. This can lead to faster deployments, lower cold-starts and allow you to deploy large applications where individual sources files in a zip archive are larger than the action size limit.</p><p>Here are the instructions for how to use three popular module bundlers with the Node.js runtime. The &quot;left pad&quot; action example will be used as the source file for bundling along with the external library.</p><h4 class="anchor anchorWithStickyNavbar_YmL6" id="using-rollupjs-httpsrollupjsorg">Using rollup.js (<a href="https://rollupjs.org" target="_blank" rel="noopener noreferrer">https://rollupjs.org</a>)<a class="hash-link" href="#using-rollupjs-httpsrollupjsorg" title="Direct link to heading">â€‹</a></h4><ul><li>Re-write the <code>index.js</code> to use ES6 Modules, rather than CommonJS module format.</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">leftPad</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;left-pad&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">myAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> lines </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lines</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">padded</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> lines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">l</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">leftPad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> main </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myAction</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p><em>Make sure you export the function using the <code>const main = ...</code> pattern. Using <code>export {myAction as main}</code> does not work due to tree-shaking. See this <a href="https://boneskull.com/rollup-for-javascript-actions-on-openwhisk/" target="_blank" rel="noopener noreferrer">blog post</a> for full details on why this is necessary.</em></p><ul><li>Create the Rollup.js configuration file in <code>rollup.config.js</code> with the following contents.</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">commonjs</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rollup-plugin-commonjs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">resolve</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rollup-plugin-node-resolve&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">input</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">output</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">file</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;bundle.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">format</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cjs&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">plugins</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">commonjs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Install the Rollup.js library and plugins using NPM.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install rollup rollup-plugin-commonjs rollup-plugin-node-resolve --save-dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Run the Rollup.js tool using the configuration file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npx rollup --config</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create an action using the bundle source file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create my-action bundle.js --kind nodejs:10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Invoke the action as normal. Results should be the same as the example above.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke my-action --result --param lines &quot;[\&quot;and now\&quot;, \&quot;for something completely\&quot;, \&quot;different\&quot; ]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_YmL6" id="using-webpack-httpswebpackjsorg">Using webpack (<a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/</a>)<a class="hash-link" href="#using-webpack-httpswebpackjsorg" title="Direct link to heading">â€‹</a></h4><ul><li>Change <code>index.js</code> to export the <code>main</code> function using as a global reference.</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> leftPad </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;left-pad&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">myAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> lines </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lines</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">padded</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> lines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">l</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">leftPad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">global</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myAction</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>This allows the bundle source to &quot;break out&quot; of the closures Webpack uses when defining the modules.</p><ul><li>Create the Webpack configuration file in <code>webpack.config.js</code> with the following contents.</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">entry</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./index.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">target</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;node&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">output</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token literal-property property">filename</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;bundle.js&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Install the Webpack library and CLI using NPM.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install webpack-cli --save-dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Run the Webpack tool using the configuration file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npx webpack --config webpack.config.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create an action using the bundle source file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create my-action dist/bundle.js --kind nodejs:10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Invoke the action as normal. Results should be the same as the example above.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke my-action --result --param lines &quot;[\&quot;and now\&quot;, \&quot;for something completely\&quot;, \&quot;different\&quot; ]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_YmL6" id="using-parcel-httpsparceljsorg">Using parcel (<a href="https://parceljs.org/" target="_blank" rel="noopener noreferrer">https://parceljs.org/</a>)<a class="hash-link" href="#using-parcel-httpsparceljsorg" title="Direct link to heading">â€‹</a></h4><ul><li>Change <code>index.js</code> to export the <code>main</code> function using as a global reference.</li></ul><div class="codeBlockContainer_B_Na language-javascript theme-code-block"><div class="codeBlockContent_wujv javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> leftPad </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;left-pad&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">myAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> lines </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lines</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">padded</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> lines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">l</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">leftPad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">global</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myAction</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><p>This allows the bundle source to &quot;break out&quot; of the closures Parcel uses when defining the modules.</p><ul><li>Install the Parcel library using NPM.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install parcel-bundler --save-dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Run the Parcel tool using the configuration file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npx parcel index.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Create an action using the bundle source file.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action create my-action dist/index.js --kind nodejs:10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><ul><li>Invoke the action as normal. Results should be the same as the example above.</li></ul><div class="codeBlockContainer_B_Na theme-code-block"><div class="codeBlockContent_wujv"><pre tabindex="0" class="prism-code language-text codeBlock_lQkV thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_wrhE"><span class="token-line" style="color:#bfc7d5"><span class="token plain">hypi wsk action invoke my-action --result --param lines &quot;[\&quot;and now\&quot;, \&quot;for something completely\&quot;, \&quot;different\&quot; ]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_RNM0 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_YmL6" id="reference">Reference<a class="hash-link" href="#reference" title="Direct link to heading">â€‹</a></h3><p>JavaScript actions can be executed in Node.js version 8, 10, 12 or 14.
Currently actions are executed by default in a Node.js version 10 environment.</p><h4 class="anchor anchorWithStickyNavbar_YmL6" id="nodejs-version-10-environment">Node.js version 10 environment<a class="hash-link" href="#nodejs-version-10-environment" title="Direct link to heading">â€‹</a></h4><p>The Node.js version 10 environment is used if the <code>--kind</code> flag is explicitly specified with a value of &#x27;nodejs:10&#x27; when creating or updating an Action.</p><p>The following packages are pre-installed in the Node.js version 10 environment:</p><ul><li><a href="https://www.npmjs.com/package/openwhisk" target="_blank" rel="noopener noreferrer">openwhisk</a> - JavaScript client library for the OpenWhisk platform. Provides a wrapper around the OpenWhisk APIs.</li></ul><h4 class="anchor anchorWithStickyNavbar_YmL6" id="nodejs-version-12-environment">Node.js version 12 environment<a class="hash-link" href="#nodejs-version-12-environment" title="Direct link to heading">â€‹</a></h4><p>The Node.js version 12 environment is used if the <code>--kind</code> flag is explicitly specified with a value of &#x27;nodejs:12&#x27; when creating or updating an Action.</p><p>The following packages are pre-installed in the Node.js version 12 environment:</p><ul><li><a href="https://www.npmjs.com/package/openwhisk" target="_blank" rel="noopener noreferrer">openwhisk</a> - JavaScript client library for the OpenWhisk platform. Provides a wrapper around the OpenWhisk APIs.</li></ul><h4 class="anchor anchorWithStickyNavbar_YmL6" id="nodejs-version-14-environment">Node.js version 14 environment<a class="hash-link" href="#nodejs-version-14-environment" title="Direct link to heading">â€‹</a></h4><p>The Node.js version 14 environment is used if the <code>--kind</code> flag is explicitly specified with a value of &#x27;nodejs:14&#x27; when creating or updating an Action.</p><p>The following packages are pre-installed in the Node.js version 12 environment:</p><ul><li><a href="https://www.npmjs.com/package/openwhisk" target="_blank" rel="noopener noreferrer">openwhisk</a> - JavaScript client library for the OpenWhisk platform. Provides a wrapper around the OpenWhisk APIs.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Large portions of this page is copied from the <a href="https://github.com/apache/openwhisk/tree/master/docs" target="_blank" rel="noopener noreferrer">Apache OpenWhisk documentation</a> on April 23rd 2021 - where there have been customisations to match Hypi&#x27;s deployment this has been noted. Apache OpenWhisk and the Apache name are the property of the Apache Foundation and licensed under the <a href="https://github.com/apache/openwhisk/blob/master/LICENSE.txt" target="_blank" rel="noopener noreferrer">Apache V2 license</a> .</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hypi-universe/docs/edit/master/content/lowcode/actions-nodejs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_St0i" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Xcjv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/lowcode/openwhisk-github"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GitHub Package</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/lowcode/actions-python"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Python actions</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_FUlz thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-asynchronous-actions" class="table-of-contents__link toc-highlight">Creating asynchronous actions</a></li><li><a href="#using-actions-to-call-an-external-api" class="table-of-contents__link toc-highlight">Using actions to call an external API</a></li><li><a href="#packaging-actions-as-nodejs-modules-with-npm-libraries" class="table-of-contents__link toc-highlight">Packaging actions as Node.js modules with NPM libraries</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/lowcode/get-started/">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/lowcode/authentication">Authentication</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/lowcode/arcql">Filtering your data</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/lowcode/crud">GraphQL CRUD APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/lowcode/rest-apis">REST APIs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://hypi.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Support Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Platform<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_BGZT"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Hypi.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.05f086b7.js"></script>
<script src="/assets/js/main.b40aeaa3.js"></script>
</body>
</html>